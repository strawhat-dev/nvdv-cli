name: release
on:
  push: { branches: [main] }
jobs:
  build:
    runs-on: windows-latest
    steps:
      - { uses: actions/checkout@v4, with: { submodules: true } }
      - uses: egor-tensin/vs-shell@v2
      - name: build
        working-directory: ${{env.GITHUB_WORKSPACE}}
        run: cl.exe /std:c++latest /MD /O2 /W4 /WX /EHsc /I nvapi nvdv.cpp user32.lib shell32.lib /link /LIBPATH:nvapi\amd64
      - { uses: actions/upload-artifact@v4, with: { path: nvdv.exe } }
